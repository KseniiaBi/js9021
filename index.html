<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 
</head>
<body>



<script>


//  –û–û–ü


let animal = {
	eat: true,
	walk(){
		console.log('is walking');
	}
}

let cat = {
	purr: true,
	__proto__: animal
}

cat.walk();

let sphynx = {
	__proto__: cat,
	hair: false
}

sphynx.walk();


sphynx.eat; // true
sphynx.purr; // true


// –∏–µ—Ä–∞—Ä—Ö–∏—è –≤—Å–µ–≥–¥–∞ –Ω–∏—Å—Ö–æ–¥—è—â–∞—è, –∑–∞–∫–æ–ª—å—Ü–µ–≤–∞—Ç—å –µ–µ –Ω–µ–ª—å–∑—è


for(let prop in sphynx){
	if(sphynx.hasOwnProperty(prop)){
		console.log(`${prop}: ${sphynx[prop]}`);
	}
}

//  hasOwnProperty –≤—ã–≤–æ–¥–∏—Ç –∑–¥–µ—Å—å —Ç–æ–ª—å–∫–æ —Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤–Ω—É—Ç—Ä–∏ sphynx


// functional OOP

function Machine(name){
	this.name = name;
	this.enabled = false;

	this.turnOnOff = function(){
		this.enabled = !this.enabled;
		console.log(`${this.name} enabled: ${this.enabled}`);
	}
}

let fridge = new Machine('Samsung');
fridge.turnOnOff();

function CoffeeMachine(name, capacity){
	Machine.apply(this, [name, capacity]);

	this.isRunning = false;
	this.capacity = capacity;
	this._waterAmount = 0; // protected variable
	const minWater = 50; // private variable

	this.getWaterAmount = function(){
		return this._waterAmount;
	}

	this.setWaterAmount = function(amount){
		if(typeof(amount) != 'number'){
			// throw new Error('Please use only water'); // –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–∫–æ–≥–æ –≤–∏–¥–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
			console.error('Please use only water');
			return;
		}
		else if(this._waterAmount + amount > capacity){
			console.error('Too much water!');
		}
		else if(amount < 0){
			console.error(`Can not remove water from ${this.name}`);
		}
		else{
			this._waterAmount += amount;
		}
	}

	let parentturnOnOff  = this.turnOnOff;

	this.turnOnOff = function(){
		if(!this.isRunning){
			parentturnOnOff.call(this);
		}
		else{
			setTimeout(() => {
				parentturnOnOff.call(this);
			}, 1000);
		}
		
	}

	this.makeCoffee = function(){
		if(this.enabled){
			if(this._waterAmount < minWater){
				console.error('Please add water');
				return;
			}
			this.isRunning = true;
			setTimeout(() => {
				console.log('Coffee is ready');
				this.isRunning = false;
			}, 1000);
		}	
	}
}


let saeco = new CoffeeMachine('Saeco', 1000);
saeco.turnOnOff();

console.log(saeco.getWaterAmount());
saeco.setWaterAmount('121212');
saeco.setWaterAmount(1550);
console.log(saeco.getWaterAmount());
saeco.setWaterAmount(150);
console.log(saeco.getWaterAmount());
saeco.setWaterAmount(350);
console.log(saeco.getWaterAmount());
saeco.setWaterAmount(-350);
console.log(saeco.getWaterAmount());


saeco.makeCoffee();
saeco.turnOnOff();


let coffeemaker = new CoffeeMachine('Gaggia class D', 1500);
coffeemaker.turnOnOff();
coffeemaker.setWaterAmount(-350);
coffeemaker.makeCoffee();
coffeemaker.turnOnOff();



// Prototype OOP

function Car(name, energy, type, year){
	this.name = name;
	this.type = type;
	this.year = year;
	this.energy = energy;

	this._isReady = false;
	this._fuelAmount = 0;
}

Car.prototype.sell = function(){
	console.warn(`–ü—Ä–æ–¥–∞–º ${this.type} ${this.name} ${this.year} –≥–æ–¥–∞ –≤—ã–ø—É—Å–∫–∞, ${this.energy}. –ù–µ –±–∏—Ç, –Ω–µ –∫—Ä–∞—à–µ–Ω :) `);
}

Car.prototype.drive = function(){
	if(!this._isReady){
		switch(this.energy){
			case 'petrol': console.log('95th, please ');
							break;
			case 'gas': console.log('–ì–∞–∑ –¥–æ –ø–æ–ª–Ω–æ–≥–æ');
							break;
			case 'diesel': console.log('Pullse to max');
							break;
			case 'electro': console.log('‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏èüîå');
							break;
			default: console.log('–õ–µ–π –≤—Å–µ, —á—Ç–æ –µ—Å—Ç—å');
							break;
		}
	}
	else{
		console.log('50km/h');
	}
}

// –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –≥–µ—Ç—Ç–µ—Ä, –∏ —Å–µ—Ç—Ç–µ—Ä
Car.prototype.fuel = function(){
	if(arguments.length == 0){
		console.log(` ${this._fuelAmount}%`);
	}
	else{

		if(arguments[0] < 0 && arguments[0] + this._fuelAmount > 100){
			console.error('–ó–∞–ø—Ä–∞–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞');
		}
		else{
			this._isReady = true;
			this._fuelAmount += arguments[0];
		}
	}
}


let tesla = new Car('Tesla Model X', 'electro', 'crossover', 2021);

tesla.drive();
tesla.fuel(50);
tesla.fuel();
tesla.drive();
tesla.sell();


// –û–û–ü –Ω–∞ –∫–ª–∞—Å—Å–∞—Ö

class Drink{
	constructor(name, vol){
		this.name = name;
		this.volume = vol;
	}

	getReady(){
		setTimeout(() => {
			console.log(`${this.name}, ${this.volume} is ready. Enjoy!`);
		}, 2000);
	}
}

class Coffee extends Drink{
	static barista = 'Black Jack'; // —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
	static coffecups = 0;

	constructor(name, vol) {
		super(name, vol);
		Coffee.countCoffee();
	}
		// #coffeine = 20; // Uncaught SyntaxError: Private field '#coffeine' must be declared in an enclosing class
	orderToGo(){
		console.warn('Drink was ordered to go');
		super.getReady();
	}

	static countCoffee(){
		Coffee.coffecups += 1;
	}
}

let latte = new Coffee('Latte', 220);
let cap = new Coffee('Cappuchino', 180);
let esp = new Coffee('Espresso', 30);
	// console.log(latte.#coffeine); //Uncaught SyntaxError: Private field '#coffeine' must be declared in an enclosing class
latte.orderToGo();

// typeof(Coffee) = function

console.log(Coffee.barista); 
console.log(Coffee.coffecups); 

console.log(tesla instanceof(Car)); // true


// Singleton Pattern 

class Universe{
	static count = 0;

	constructor(name){
		if(Universe.count == 1){
			return;
		}
		else{
			this.name = name;
			Universe.count += 1;
		}
		
	}
}

let existing = new Universe('all');
let u2 = new Universe('u2');


</script>

</body>
</html>