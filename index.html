<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 

	<style>

		.slider{
			height: 300px;
			position: relative;
			margin-bottom: 60px;
		}

		.slide{
			position: absolute;
			width: 100%;
			height: 100%;
			left: 0;
			top: 0;
			text-align: center;
			font-size: 100px;
			color: #fff;
			background: lightgray;
			opacity: 0;
			transition: opacity 0.5s linear;
		}
/*
		.slide:nth-of-type(2){
			background: lightgreen;
		}
		.slide:nth-of-type(3){
			background: hotpink;
		}
		.slide:nth-of-type(4){
			background: lightblue;
		}
		.slide:nth-of-type(5){
			background: limegreen;
		}
*/
		.slide.active{
			opacity: 1;
		}

		.navs{
			position: absolute;
			bottom: 20px;
			display: flex;
			justify-content: center;
			margin: 0;
			padding: 0;
			width: 100%;
			cursor: pointer;
		}

		.nav{
			list-style: none;
			width: 10px;
			height: 10px;
			border-radius: 50%;
			border: 2px solid #fff;
			margin-right: 15px;
		}

		.nav.active{
			background: #fff;
		}

		.arr_prev, .arr_next{
			position: absolute;
			top: 100px;
			font-size: 100px;
			transform: scaleX(0.5);
			left: 0;
			z-index: 10;
			color: #fff;
			cursor: pointer;
		}

		.arr_next{
			left: auto;
			right: 0;
		}
		

	</style>
	
</head>
<body>

	<div class="slider">
		<div class="slide active">Slide 1</div>
		<div class="slide">Slide 2</div>
		<div class="slide">Slide 3</div>
		<div class="slide">Slide 4</div>
		<div class="slide">Slide 5</div>
		<div class="slide">Slide 6</div>
		<div class="slide">Slide 7</div>

		<ul class="navs">
		</ul>

		<div class="arr_prev">&lt;</div>
		<div class="arr_next">&gt;</div>
	</div>

	<div class="slider">
		<div class="slide active">Slide 1</div>
		<div class="slide">Slide 2</div>
		<div class="slide">Slide 3</div>

		<ul class="navs">
		</ul>

		<div class="arr_prev">&lt;</div>
		<div class="arr_next">&gt;</div>
	</div>

	<div class="slider">
		<div class="slide active">Slide 1</div>
		<div class="slide">Slide 2</div>
		<div class="slide">Slide 3</div>
		<div class="slide">Slide 4</div>
		<div class="slide">Slide 5</div>

		<ul class="navs">
		</ul>

		<div class="arr_prev">&lt;</div>
		<div class="arr_next">&gt;</div>
	</div>


<script>

	const sliders = document.querySelectorAll('.slider');

	class Slider{
		constructor(slider, t){
			this.slides = slider.querySelectorAll('.slide');
			this.nav = slider.querySelector('.navs');
			this.navs = [];
			this.prev = slider.querySelector('.arr_prev');
			this.next = slider.querySelector('.arr_next');
			this.currentSlide = 0;
			this.interval;
			this.slideTime = t;

			this.prev.onclick = ()=>{
				this.currentSlide = this.currentSlide> 0 ? --this.currentSlide : this.slides.length-1;
				this.changeSlide(this.currentSlide);
			}

			this.next.onclick = ()=>{
				this.currentSlide = this.currentSlide < this.slides.length-1 ? ++this.currentSlide : 0;
				this.changeSlide(this.currentSlide);
			}

			this.decorateSlider();

			// initialize autoplay once
			this.init();
		}

		decorateSlider(){
			for(let i = 0; i < this.slides.length; i++){
				// add colors to slides
				let r = Math.floor(Math.random()*255);
				let g = Math.floor(Math.random()*255);
				let b = Math.floor(Math.random()*255);

				let color = `rgb(${r}, ${g}, ${b})`;
				this.slides[i].style.background = color;

				// create dots
				let dot = document.createElement('li');
				dot.classList.add('nav');
				if(i == 0){
					dot.classList.add('active');
				}
				dot.dataset.slide = i;
				
				this.nav.append(dot);
				this.navs.push(dot);

				dot.onclick = () => {
					this.currentSlide = i;
					this.changeSlide(i);
				}
			}
		}

		// change slide from everywhere
	 	changeSlide(num){
			for(let i = 0; i < this.slides.length; i++){
				this.slides[i].classList.remove('active');
				this.navs[i].classList.remove('active');
			}
			this.slides[num].classList.add('active');
			this.navs[num].classList.add('active');

			// re-initialize autoplay 
			clearInterval(this.interval);
			this.init();
		}

		// autoplay
		init(){
			this.interval = setInterval(() => {
				this.currentSlide = this.currentSlide < this.slides.length-1 ? ++this.currentSlide : 0;
				this.changeSlide(this.currentSlide);
			},this.slideTime);
		}

	}

	for(let s of sliders){
		let time = Math.floor(Math.random()*4000 + 1000);
		let i = new Slider(s, time);
		console.log(time);
	}



	// OOP pattern Factory

	class Car{
		constructor(name,year ){
			this.year = year;
			this.name = name;
			this.type = 'car';
		}
	}

	class Motorcycle{
		constructor(name,year ){
			this.year = year;
			this.name = name;
			this.type = 'moto';
		}
	}

	class Bike{
		constructor(name,year ){
			this.year = year;
			this.name = name;
			this.type = 'bike';
		}
	}

	class VehicleFactory{
		create(obj){
			switch(obj.type){
				case 'car': return new Car(obj.name, obj.year);
							break;
				case 'moto': return new Motorcycle(obj.name, obj.year);
							break;
				case 'bike': return new Bike(obj.name, obj.year);
							break;
				default: return new Car(obj.name, obj.year);
							break;
			}
		}
	}


	let vf = new VehicleFactory();
	let veh1 = vf.create({type: 'car', year: 2020, name: 'vehicle'});
	let veh2 = vf.create({type: 'bike', year: 2019, name: 'vehicle'});
	let veh3 = vf.create({type: 'moto', year: 2011, name: 'vehicle'});


</script>

</body>
</html>